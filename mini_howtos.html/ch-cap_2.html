<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">

<html>

<head>

<meta http-equiv="content-type" content="text/html; charset=iso-8859-1">

<title>Some Mini-Howtos of Interest - The ssh application</title>

<link href="index.html" rel="start">
<link href="ch-cap_1.html" rel="prev">
<link href="ch-cap_emacs.html" rel="next">
<link href="index.html#contents" rel="contents">
<link href="index.html#copyright" rel="copyright">
<link href="ch-cap_0.html" rel="chapter" title="1 Basic Administration">
<link href="ch-cap_1.html" rel="chapter" title="2 Network and Navigators">
<link href="ch-cap_2.html" rel="chapter" title="3 The ssh application">
<link href="ch-cap_emacs.html" rel="chapter" title="4 Emacs text editor">
<link href="ch-cap_3.html" rel="chapter" title="5 Perl Language">
<link href="ch-cap_fortran.html" rel="chapter" title="6 Fortran Tips and Templates">
<link href="ch-cap_python.html" rel="chapter" title="7 Python Tips and Templates">
<link href="ch-cap_4.html" rel="chapter" title="8 Text Processing and Formatting">
<link href="ch-cap_5.html" rel="chapter" title="9 Graphic Edition">
<link href="ch-cap_6.html" rel="chapter" title="10 Miscelanea">
<link href="ch-cap_Trans.html" rel="chapter" title="11 Translations of this document">
<link href="ch-cap_0.html#s-sec_01" rel="section" title="1.1 Reinstalling a wiped out GRUB">
<link href="ch-cap_0.html#s-sec_02" rel="section" title="1.2 Problem with journalizing">
<link href="ch-cap_0.html#s-sec_02_2" rel="section" title="1.3 Labels in ext2 and ext3 units">
<link href="ch-cap_0.html#s-sec_03" rel="section" title="1.4 Open a xconsole as normal user">
<link href="ch-cap_0.html#s-sec_04" rel="section" title="1.5 Resetting the root password">
<link href="ch-cap_0.html#s-sec_05" rel="section" title="1.6 Configure exim to use SMTP-TLS">
<link href="ch-cap_0.html#s-sec_08" rel="section" title="1.7 Copying CUPS configuration from one server to another">
<link href="ch-cap_0.html#s-sec_09" rel="section" title="1.8 Mapping network interfaces to a fixed name.">
<link href="ch-cap_0.html#s-sec_010" rel="section" title="1.9 Using labels to mount disk partitions">
<link href="ch-cap_0.html#s-sec_011" rel="section" title="1.10 Using find and xargs">
<link href="ch-cap_0.html#s-sec_012" rel="section" title="1.11 Preparing a USB bootable Linux installation device (Fast way).">
<link href="ch-cap_0.html#s-sec_012b" rel="section" title="1.12 Preparing a USB bootable Debian installation device.">
<link href="ch-cap_0.html#s-sec_013" rel="section" title="1.13 Upgrading Flashplayer in Debian Lenny using backports.">
<link href="ch-cap_0.html#s-sec_014" rel="section" title="1.14 Passive network exploration with p0f.">
<link href="ch-cap_0.html#s-sec_015" rel="section" title="1.15 Preparing a bootable flashdisk with Billix.">
<link href="ch-cap_0.html#s-sec_016" rel="section" title="1.16 Recovering a console that is unusable.">
<link href="ch-cap_0.html#s-sec_017" rel="section" title="1.17 Simple configuration of sudo">
<link href="ch-cap_0.html#s-sec_018" rel="section" title="1.18 Check the groups to which a user belongs.">
<link href="ch-cap_0.html#s-sec_019" rel="section" title="1.19 Check the available system locale options and establish a default one.">
<link href="ch-cap_0.html#s-sec_020" rel="section" title="1.20 Change the encoding of given files.">
<link href="ch-cap_0.html#s-sec_021" rel="section" title="1.21 Problem with the wireless and nm">
<link href="ch-cap_0.html#s-sec_022" rel="section" title="1.22 Updating Debian from Wheezy to Jessie">
<link href="ch-cap_0.html#s-sec_023" rel="section" title="1.23 Error in file /var/lib/dpkg/status">
<link href="ch-cap_0.html#s-sec_024" rel="section" title="1.24 How to record terminal sessions using ttyrec">
<link href="ch-cap_0.html#s-sec_025" rel="section" title="1.25 Using Bash to count the number of files in a directory">
<link href="ch-cap_0.html#s-sec_026" rel="section" title="1.26 Getting detailed information about your hardware">
<link href="ch-cap_0.html#s-sec_027" rel="section" title="1.27 Adding your servers load to the screen hardstatus line">
<link href="ch-cap_0.html#s-sec_028" rel="section" title="1.28 Making a backup of a Gmail account.">
<link href="ch-cap_0.html#s-sec_errred" rel="section" title="1.29 Redirecting STDERR to SDTOUT">
<link href="ch-cap_0.html#s-sec_extrdeb" rel="section" title="1.30 Listing and extracting files from a deb package file.">
<link href="ch-cap_0.html#s-sec_script" rel="section" title="1.31 Using script to keep terminal output records.">
<link href="ch-cap_0.html#s-sec_modcompopt" rel="section" title="1.32 Checking actual kernel compiling options.">
<link href="ch-cap_0.html#s-sec_parted" rel="section" title="1.33 Formatting HD partitions larger than 2 TB">
<link href="ch-cap_0.html#s-sec_new_part" rel="section" title="1.34 Adding a partition to fstab by UUID">
<link href="ch-cap_0.html#s-sec_error_eject" rel="section" title="1.35 Error ejecting a CD">
<link href="ch-cap_0.html#s-sec_xkill" rel="section" title="1.36 Killing an unresponsive X-windows">
<link href="ch-cap_0.html#s-sec_tmpplus" rel="section" title="1.37 Enlarging the size of a tmp directory">
<link href="ch-cap_0.html#s-sec_checkpack" rel="section" title="1.38 Checking if a package is installed in Debian">
<link href="ch-cap_1.html#s-sec_11" rel="section" title="2.1 Running multiple firefox instances">
<link href="ch-cap_1.html#s-sec_12" rel="section" title="2.2 Electronic signature with iceweasel">
<link href="ch-cap_1.html#s-sec_13" rel="section" title="2.3 Some tips to access the web using the console">
<link href="ch-cap_1.html#s-sec_14" rel="section" title="2.4 Make files in a directory downloadable from a web server">
<link href="ch-cap_2.html#s-sec_21" rel="section" title="3.1 Removing a known_hosts entry">
<link href="ch-cap_2.html#s-sec_22" rel="section" title="3.2 Generating a key pair and exporting to a remote host">
<link href="ch-cap_2.html#s-sec_23" rel="section" title="3.3 Launching with ssh programs that require a terminal">
<link href="ch-cap_2.html#s-sec_24" rel="section" title="3.4 Tunneling with ssh">
<link href="ch-cap_2.html#s-sec_tarssh" rel="section" title="3.5 Using ssh to make a tarball directly in a remote folder">
<link href="ch-cap_emacs.html#s-sec_emacs1" rel="section" title="4.1 Emacs macros">
<link href="ch-cap_emacs.html#s-sec_emacs2" rel="section" title="4.2 Changing the default system's text editor to Emacs">
<link href="ch-cap_emacs.html#s-sec_emacs3" rel="section" title="4.3 Removing empty lines in Emacs">
<link href="ch-cap_emacs.html#s-sec_emacs_init" rel="section" title="4.4 Reading init file .emacs">
<link href="ch-cap_emacs.html#s-sec_comment" rel="section" title="4.5 Commenting a region of a code in Emacs">
<link href="ch-cap_emacs.html#s-sec_emacs_orgmode" rel="section" title="4.6 Emacs org-mode">
<link href="ch-cap_3.html#s-sec_31" rel="section" title="5.1 Installing a CPAN module">
<link href="ch-cap_3.html#s-sec_32" rel="section" title="5.2 Interesting perl oneliners">
<link href="ch-cap_3.html#s-sec_33" rel="section" title="5.3 Environment Codification and Character Ordering">
<link href="ch-cap_3.html#s-sec_34" rel="section" title="5.4 Extracting matches from a regular expressions">
<link href="ch-cap_3.html#s-sec_35" rel="section" title="5.5 Basic use of fork to launch a program">
<link href="ch-cap_3.html#s-sec_36" rel="section" title="5.6 Perl predefined variables. Some examples.">
<link href="ch-cap_3.html#s-sec_37" rel="section" title="5.7 Using a named pipe for interprocess communication in Perl">
<link href="ch-cap_3.html#s-sec_38" rel="section" title="5.8 CperlMode in Emacs">
<link href="ch-cap_3.html#s-sec_39" rel="section" title="5.9 Using Perl to benchmark code.">
<link href="ch-cap_3.html#s-sec_perlrecdir" rel="section" title="5.10 Accessing recursively files and directories in Perl">
<link href="ch-cap_3.html#s-sec_perl_newfilehandle" rel="section" title="5.11 Correct way of opening filehandles in Perl">
<link href="ch-cap_fortran.html#s-sec_06" rel="section" title="6.1 Compile and install the LAPACK95 interface driver routine.">
<link href="ch-cap_fortran.html#s-sec_07" rel="section" title="6.2 Compile and link statically with NAG and LAPACK">
<link href="ch-cap_fortran.html#s-sec_cpp_gfortran" rel="section" title="6.3 Creating a Makefile to use cpp with gfortran">
<link href="ch-cap_fortran.html#s-sec_fortran_envvar" rel="section" title="6.4 Obtaining environment variables values from Fortran">
<link href="ch-cap_fortran.html#s-sec_fortran_random" rel="section" title="6.5 Creating a vector of random data">
<link href="ch-cap_fortran.html#s-sec_fortran_maxl" rel="section" title="6.6 Obtaining the values and positions of the larger values in an array">
<link href="ch-cap_fortran.html#s-sec_fortran_makefile" rel="section" title="6.7 Tips for building a Fortran Makefile">
<link href="ch-cap_python.html#s-sec_python_random" rel="section" title="7.1 Creating a vector of random data">
<link href="ch-cap_python.html#s-sec_python_boolvec" rel="section" title="7.2 Logical comparison between two boolean vectors">
<link href="ch-cap_python.html#s-sec_python_interval" rel="section" title="7.3 Creating a loop iterating on a list and the list index">
<link href="ch-cap_python.html#s-sec_python_addframecol" rel="section" title="7.4 Adding a column to a Pandas dataframe">
<link href="ch-cap_python.html#s-sec_python_maxindex" rel="section" title="7.5 Getting the maximum component of a vector and its index in numpy">
<link href="ch-cap_python.html#s-sec_python_tzone" rel="section" title="7.6 Some easy examples of offset-aware times with pytz">
<link href="ch-cap_python.html#s-sec_mplotlib_1" rel="section" title="7.7 Creating a panel array of plots with Matplotlib">
<link href="ch-cap_python.html#s-sec_mplotlib_2" rel="section" title="7.8 Creating a panel array of plots with common axes using Matplotlib">
<link href="ch-cap_python.html#s-sec_mplotlib_3" rel="section" title="7.9 Combining several plots in a figure">
<link href="ch-cap_python.html#s-sec_python_dispall" rel="section" title="7.10 Display in Ipythonall the components of a Pandas Series or DataFrame">
<link href="ch-cap_python.html#s-sec_python_qtbuff" rel="section" title="7.11 Changing the number of lines to scroll in an Ipython qtconsole session.">
<link href="ch-cap_4.html#s-sec_411" rel="section" title="8.1 pdftk application examples">
<link href="ch-cap_4.html#s-sec_41" rel="section" title="8.2 Merge two PostScript or PDF files">
<link href="ch-cap_4.html#s-sec_42" rel="section" title="8.3 Include et al. in bibtex">
<link href="ch-cap_4.html#s-sec_43" rel="section" title="8.4 Include bibliographical info in each chapter using LaTeX">
<link href="ch-cap_4.html#s-sec_44" rel="section" title="8.5 Comment paragraphs in LaTeX">
<link href="ch-cap_4.html#s-sec_45" rel="section" title="8.6 Installing appropriately a LaTeX package or style.">
<link href="ch-cap_4.html#s-sec_46" rel="section" title="8.7 Change the selected language in DebianDoc files">
<link href="ch-cap_4.html#s-sec_47" rel="section" title="8.8 Avoid Page %d may be too complex to print errors.">
<link href="ch-cap_4.html#s-sec_49" rel="section" title="8.9 Diverse LaTeX lists">
<link href="ch-cap_4.html#s-sec_410" rel="section" title="8.10 Use Unicode encoding in LaTeX">
<link href="ch-cap_4.html#s-sec_latexcolor" rel="section" title="8.11 Use color in LaTeX">
<link href="ch-cap_4.html#s-sec_fullpage" rel="section" title="8.12 Easy way of defining smaller margins in LaTeX">
<link href="ch-cap_4.html#s-sec_changefootnsym" rel="section" title="8.13 Changing footnote symbols in LaTeX">
<link href="ch-cap_4.html#s-sec_sevfootn" rel="section" title="8.14 Using the same footnote mark in LaTeX">
<link href="ch-cap_4.html#s-sec_eurosym" rel="section" title="8.15 Using the euro symbol in LaTeX">
<link href="ch-cap_4.html#s-sec_landscape" rel="section" title="8.16 Changing pages to landscape orientation in LaTeX texts">
<link href="ch-cap_4.html#s-sec_singledouble" rel="section" title="8.17 Including single column figures or tables in a double column LaTeX document">
<link href="ch-cap_4.html#s-sec_horizontal" rel="section" title="8.18 Controlling horizontal spacing in LaTeX">
<link href="ch-cap_5.html#s-sec_51" rel="section" title="9.1 Include greek characters in inkscape">
<link href="ch-cap_5.html#s-sec_52" rel="section" title="9.2 Include greek characters in Gimp">
<link href="ch-cap_5.html#s-sec_53" rel="section" title="9.3 Change the text baseline in inkscape">
<link href="ch-cap_5.html#s-sec_54" rel="section" title="9.4 Use ImageMagick to transform graphic files">
<link href="ch-cap_5.html#s-sec_55" rel="section" title="9.5 Enhancing colors and resolution in Gimp">
<link href="ch-cap_5.html#s-sec_56" rel="section" title="9.6 Remove the background of an image in Gimp">
<link href="ch-cap_5.html#s-sec_57" rel="section" title="9.7 Take a screenshot using Gimp">
<link href="ch-cap_5.html#s-sec_markersink" rel="section" title="9.8 Change the color of markers in inkscape">
<link href="ch-cap_5.html#s-sec_gimp_canvas" rel="section" title="9.9 Modify the canvas size of a Gimp file">
<link href="ch-cap_5.html#s-sec_extractpdfimg" rel="section" title="9.10 Terminal app to extract images from a pdf file">
<link href="ch-cap_6.html#s-sec_61" rel="section" title="10.1 Compute the average from the results of Moodle test grading">
<link href="ch-cap_6.html#s-sec_62" rel="section" title="10.2 Splitting in two lines a cell content in Openoffice/simpress">
<link href="ch-cap_6.html#s-sec_63" rel="section" title="10.3 Solving BADSIG errors in UBUNTU (Oneiric Ocelot)">
<link href="ch-cap_0.html#s-sec_0101" rel="subsection" title="1.1.1 Grub2 case.">
<link href="ch-cap_0.html#s-sec_0102" rel="subsection" title="1.1.2 Old Grub case.">
<link href="ch-cap_0.html#s-ref_wipedgrub" rel="subsection" title="1.1.3 References">
<link href="ch-cap_0.html#s-ref_rootpasswd" rel="subsection" title="1.5.1 References">
<link href="ch-cap_0.html#s-ref_exim" rel="subsection" title="1.6.1 References">
<link href="ch-cap_0.html#s-ref_cupscopy" rel="subsection" title="1.7.1 References">
<link href="ch-cap_0.html#s-ref_xargs" rel="subsection" title="1.10.1 References">
<link href="ch-cap_0.html#s-ref_usbboot1" rel="subsection" title="1.11.1 References">
<link href="ch-cap_0.html#s-ref_usbboot" rel="subsection" title="1.12.1 References">
<link href="ch-cap_0.html#s-ref_flashplayer" rel="subsection" title="1.13.1 References">
<link href="ch-cap_0.html#s-ref_billix" rel="subsection" title="1.15.1 References">
<link href="ch-cap_0.html#s-ref_jessieupdate" rel="subsection" title="1.22.1 References">
<link href="ch-cap_0.html#s-ref_ttyrec" rel="subsection" title="1.24.1 References">
<link href="ch-cap_0.html#s-ref_getmailgmail" rel="subsection" title="1.28.1 References">
<link href="ch-cap_0.html#s-ref_extrdeb" rel="subsection" title="1.30.1 References">
<link href="ch-cap_0.html#s-ref_parted" rel="subsection" title="1.33.1 References">
<link href="ch-cap_0.html#s-ref_tempnew" rel="subsection" title="1.37.1 References">
<link href="ch-cap_1.html#s-ref_webconso" rel="subsection" title="2.3.1 References">
<link href="ch-cap_2.html#s-ref_sshtty" rel="subsection" title="3.3.1 References">
<link href="ch-cap_2.html#s-ref_sshtunnel" rel="subsection" title="3.4.1 References">
<link href="ch-cap_emacs.html#s-ref_emacs" rel="subsection" title="4.1.1 References">
<link href="ch-cap_emacs.html#s-ref_emacs03" rel="subsection" title="4.3.1 References">
<link href="ch-cap_emacs.html#s-ref_emacs_init" rel="subsection" title="4.4.1 References">
<link href="ch-cap_emacs.html#s-ref_comment" rel="subsection" title="4.5.1 References">
<link href="ch-cap_emacs.html#s-ref_emacs_orgmode" rel="subsection" title="4.6.1 References">
<link href="ch-cap_3.html#s-sec_311" rel="subsection" title="5.1.1 First alternative for installing a CPAN module">
<link href="ch-cap_3.html#s-sec_312" rel="subsection" title="5.1.2 Second alternative for installing a CPAN module">
<link href="ch-cap_3.html#s-ref_codifs" rel="subsection" title="5.3.1 References">
<link href="ch-cap_3.html#s-ref_perlipc" rel="subsection" title="5.7.1 References">
<link href="ch-cap_3.html#s-ref_cperlmode" rel="subsection" title="5.8.1 References">
<link href="ch-cap_3.html#s-ref_benchmark" rel="subsection" title="5.9.1 References">
<link href="ch-cap_3.html#s-ref_open_new_filehandles" rel="subsection" title="5.11.1 References">
<link href="ch-cap_fortran.html#s-make_inc_77" rel="subsection" title="6.1.1 make.inc for LAPACK compilation">
<link href="ch-cap_fortran.html#s-make_inc_95" rel="subsection" title="6.1.2 make.inc for LAPACK95 compilation">
<link href="ch-cap_fortran.html#s-sec_prg_example" rel="subsection" title="6.1.3 Example of program using LAPACK95">
<link href="ch-cap_fortran.html#s-sec_makefile_example" rel="subsection" title="6.1.4 makefile for compiling programs with calls to LAPACK95">
<link href="ch-cap_fortran.html#s-ref_f90_codes_Makefile" rel="subsection" title="6.3.1 Fortran Codes">
<link href="ch-cap_fortran.html#s-ref_Makefile" rel="subsection" title="6.3.2 References">
<link href="ch-cap_python.html#s-ref_dispall" rel="subsection" title="7.10.1 References">
<link href="ch-cap_python.html#s-ref_ipybuff" rel="subsection" title="7.11.1 References">
<link href="ch-cap_4.html#s-ref_mergepdf" rel="subsection" title="8.2.1 References">
<link href="ch-cap_4.html#s-ref_latexlists" rel="subsection" title="8.9.1 References">
<link href="ch-cap_4.html#s-ref_latexcolor" rel="subsection" title="8.11.1 References">
<link href="ch-cap_4.html#s-ref_sevfootn" rel="subsection" title="8.14.1 References">
<link href="ch-cap_4.html#s-ref_landscape" rel="subsection" title="8.16.1 References">
<link href="ch-cap_4.html#s-ref_horizspace" rel="subsection" title="8.18.1 References">
<link href="ch-cap_5.html#s-ref_convertgraf" rel="subsection" title="9.4.1 References">
<link href="ch-cap_5.html#s-ref_markersink" rel="subsection" title="9.8.1 References">
<link href="ch-cap_5.html#s-ref_extractpdfimg" rel="subsection" title="9.10.1 References">

</head>

<body>

<p><a name="ch-cap_2"></a></p>
<hr>

<p>
[ <a href="ch-cap_1.html">previous</a> ]
[ <a href="index.html#contents">Contents</a> ]
[ <a href="ch-cap_0.html">1</a> ]
[ <a href="ch-cap_1.html">2</a> ]
[ 3 ]
[ <a href="ch-cap_emacs.html">4</a> ]
[ <a href="ch-cap_3.html">5</a> ]
[ <a href="ch-cap_fortran.html">6</a> ]
[ <a href="ch-cap_python.html">7</a> ]
[ <a href="ch-cap_4.html">8</a> ]
[ <a href="ch-cap_5.html">9</a> ]
[ <a href="ch-cap_6.html">10</a> ]
[ <a href="ch-cap_Trans.html">11</a> ]
[ <a href="ch-cap_emacs.html">next</a> ]
</p>

<hr>

<h1>
Some Mini-Howtos of Interest
<br>Chapter 3 - The <code>ssh</code> application
</h1>

<hr>

<h2 id="s-sec_21">3.1 Removing a <samp>known_hosts</samp> entry</h2>

<p>
In order to remove from the <samp>known_hosts</samp> file the entry
corresponding the the computer <var>hostname</var>, execute[<a
href="footnotes.html#f7" name="fr7">7</a>]
</p>

<pre>
      
     ssh-keygen -R <var>hostname</var>
</pre>

<hr>

<h2 id="s-sec_22">3.2 Generating a key pair and exporting to a remote host</h2>

<p>
If we want to access a remote node with <code>ssh</code> without providing our
password, we can do so using automatic login.  In order to do so, we must first
check if we have a keypair already generated.
</p>

<pre>
      
     $ ls .ssh/
     known_hosts
</pre>

<p>
If it is not generated, like in this example, we generate it using the command
</p>

<pre>
      
     $ ssh-keygen
     Generating public/private rsa key pair.
     Enter file in which to save the key (/users/home/username/.ssh/id_rsa): <var>[press enter]</var>  
     Enter passphrase (empty for no passphrase): <var>[press enter]</var>  
     Enter same passphrase again: <var>[press enter]</var>  
     Your identification has been saved in /users/home/username/.ssh/id_rsa.
     Your public key has been saved in /users/home/username/.ssh/id_rsa.pub.
     The key fingerprint is:
     8b:93:61:e7:2d:4a:50:30:a3:23:7d:fc:c5:21:af:d7
</pre>

<p>
The next step is to copy the generated public key to the remote host we want to
be able to login automatically, <var>hostname</var>.
</p>

<pre>
      
     $ ssh-copy-id -i ~/.ssh/id_rsa.pub <var>hostname</var>
     36
     The authenticity of host 'hostname (XXX.163.XXX.XXX)' can't be established.
     RSA key fingerprint is 37:2b:77:61:50:0f:2a:d2:7f:da:c9:a9:10:29:37:t6.
     Are you sure you want to continue connecting (yes/no)? yes
     Warning: Permanently added 'hostname,XXX.163.XXX.XXX' (RSA) to the list of known hosts.
     Password: 
     Now try logging into the machine, with &quot;ssh 'hostname'&quot;, and check in:
     
       .ssh/authorized_keys
     
     to make sure we haven't added extra keys that you weren't expecting.
</pre>

<p>
And that's all.  Now you can login via <code>ssh</code> without being prompted
for a password.
</p>

<hr>

<h2 id="s-sec_23">3.3 Launching with <code>ssh</code> programs that require a terminal</h2>

<p>
There are some programs that cannot be launched directly with <code>ssh</code>
because they require an associated terminal.  For example, <code>mutt</code> or
<code>screen</code>,
</p>

<pre>
      
     $ ssh user@server screen
     Must be connected to a terminal.
</pre>

<p>
To solve this problem there is an option in <code>ssh</code> to force
pseudo-tty allocation.  For example, if we want to re-attach to a previous
<code>screen</code> session in the node <var>server</var> we can do
</p>

<pre>
      
     $ ssh -t user@server screen -dr
</pre>

<hr>

<h3 id="s-ref_sshtty">3.3.1 References</h3>
<ol type="1" start="1" >
<li>
<p>
<code><a href="http://www.linuxjournal.com">Hack and / - Lightning Hacks, Linux
Journal, issue 195, July 2010</a></code>
</p>
</li>
</ol>

<hr>

<h2 id="s-sec_24">3.4 Tunneling with <code>ssh</code></h2>

<p>
The <code>ssh</code> program has the powerful feature of making the user able
to stablish encrypted tunnels between nodes.  This is a major advantage of this
extremely useful tool.  There are several possibilities.  Let's assume that we
are user <var>bob</var> in a node called <var>home_box</var>, that has a
private IP and it's behind a firewall, and we can access a second node, called
<var>work_box</var>, where we are user <var>william</var>.  We can connect from
<var>home_box</var> to <var>work_box</var> but not the other way around.  Thus,
we want to make a encrypted tunnel that enables the coconnection from
<var>work_box</var> to <var>home_box</var>.  This is known as reverse
<code>ssh</code> tunneling.
</p>

<p>
In order to create this tunnel we should run from <var>home_box</var>.
</p>

<pre>
      
     william@home_box:~$ ssh -R 9999:localhost:22 william@work_box
</pre>

<p>
A session in <var>work_box</var> is opened, and while this session is active,
the tunnel works.  Then, if we log into <var>work_box</var>, we can connect to
<var>home_box</var> making use of the tunnel.
</p>

<pre>
      
     william@work_box:~$ ssh -p 9999 bob@localhost
     The authenticity of host 'localhost (127.0.0.1)' can't be established.
     RSA key fingerprint is b0:b6:f3:78:e2:8d:8f:8b:3f:ab:b4:d4:da:c5:a6:e1.
     Are you sure you want to continue connecting (yes/no)? yes
     Warning: Permanently added 'localhost' (RSA) to the list of known hosts.
     bob@localhost's password: 
     bob@home_box:~$
</pre>

<p>
A problem in this case is that once the initial connection is closed the tunnel
collapses.  A possible way to alleviate this problem there is to run an
application in the connection to <var>work_box</var>, e.g.  <samp>top</samp>
trying to keep the connection alive.
</p>

<p>
This is not the best option.  There are better ones, for example, launching a
dedicated connection with options <samp>-f</samp> (detach ssh process from
tty), <samp>-N</samp> (do not execute any command over ssh), and <samp>-o
TCPKeepAlive=yes</samp> to keep the connection alive.
</p>

<pre>
      
     william@home_box:~$ ssh -f -N -o TCPKeepAlive=yes -R 9998:localhost:22 \ 
                            william@work_box
     william@home_box:~$
</pre>

<p>
We can then connect using the new tunnel.
</p>

<pre>
      
     william@work_box:~$ ssh -p 9998 bob@localhost
     bob@localhost's password: 
     bob@home_box:~$
</pre>

<hr>

<h3 id="s-ref_sshtunnel">3.4.1 References</h3>
<ol type="1" start="1" >
<li>
<p>
<code><a href="http://www.howtoforge.com/reverse-ssh-tunneling">howtoforge ::
reverse-ssh-tunneling</a></code>
</p>
</li>
</ol>
<ol type="1" start="2" >
<li>
<p>
<code><a href="http://www.revsys.com/writings/quicktips/ssh-tunnel.html"> SSH
Tunneling Made Easy</a></code>
</p>
</li>
</ol>
<ol type="1" start="3" >
<li>
<p>
<code><a href="http://www.linux-mag.com/id/1705">SSH Tunneling</a></code>
</p>
</li>
</ol>
<ol type="1" start="4" >
<li>
<p>
<code><a href="http://souptonuts.sourceforge.net/sshtips.htm">Breaking
Firewalls with OpenSSH and PuTTY</a></code>
</p>
</li>
</ol>

<hr>

<h2 id="s-sec_tarssh">3.5 Using <code>ssh</code> to make a tarball directly in a remote folder</h2>

<p>
Created on March 13th, 2015.
</p>

<p>
You could be interested in preparing a tarball and, for lack of space or to
save intermediate steps, transfer on the fly the file to a remote box.  For
example, let's assume that you want to transfer a directory called
<code>data_EXP</code> from a computer called <samp>laptop</samp> to another
computer called <samp>backup_server</samp> (I know, not very imaginative....).
If our working directory is <code>data_EXP</code> parent directory we can then
run
</p>

<pre>
      
     $ tar czf - data_EXP | ssh username@backup_server &quot;cat &gt; data_EXP_dir.tgz&quot;
</pre>

<hr>

<p>
[ <a href="ch-cap_1.html">previous</a> ]
[ <a href="index.html#contents">Contents</a> ]
[ <a href="ch-cap_0.html">1</a> ]
[ <a href="ch-cap_1.html">2</a> ]
[ 3 ]
[ <a href="ch-cap_emacs.html">4</a> ]
[ <a href="ch-cap_3.html">5</a> ]
[ <a href="ch-cap_fortran.html">6</a> ]
[ <a href="ch-cap_python.html">7</a> ]
[ <a href="ch-cap_4.html">8</a> ]
[ <a href="ch-cap_5.html">9</a> ]
[ <a href="ch-cap_6.html">10</a> ]
[ <a href="ch-cap_Trans.html">11</a> ]
[ <a href="ch-cap_emacs.html">next</a> ]
</p>

<hr>

<p>
Some Mini-Howtos of Interest
</p>

<address>
Curro Perez-Bernal <code><a href="mailto:francisco.perez@dfaie.uhu.es">mailto:francisco.perez@dfaie.uhu.es</a></code><br>
<br>
</address>
<hr>

</body>

</html>

